application: panoptikos3
version: 2013-12-27-0
runtime: go
api_version: go1

# Set default expiration for static files to 7 days
default_expiration: 7d

handlers:
- url: /dev-css/
  static_dir: webroot/dev-css/
  expiration: 0s

- url: /dev-js/
  static_dir: webroot/dev-js/
  expiration: 0s

- url: /dev-partials/
  static_dir: webroot/dev-partials/
  expiration: 0s

- url: /(.*\.css)
  static_files: webroot/compiled-css/\1
  upload: webroot/compiled-css/.*\.css

- url: /(.*\.js)
  static_files: webroot/compiled-js/\1
  upload: webroot/compiled-js/.*\.js

- url: /(.*\.html)
  static_files: webroot/compiled-partials/\1
  upload: webroot/compiled-partials/.*\.html

# File doesn't exist but some browsers request it, so serve an equivalent one.
- url: /apple-touch-icon-precomposed\.png
  static_files: webroot/images/apple-touch-icon-iphone-2x.png
  upload: webroot/images/apple-touch-icon-iphone-2x\.png

# File doesn't exist but some browsers request it, so serve an equivalent one.
- url: /favicon\.ico
  static_files: webroot/images/favicon-16.ico
  upload: webroot/images/favicon-16\.ico

- url: /(.*\.(?:gif|ico|jpg|png))
  static_files: webroot/images/\1
  upload: webroot/images/.*\.(?:gif|ico|jpg|png)

- url: /robots\.txt
  static_files: webroot/robots.txt
  upload: webroot/robots\.txt
  expiration: 1d

# Serve development index.html
- url: /.*
  static_files: webroot/dev-partials/index.html
  upload: webroot/dev-partials/index\.html

# Serve production index.html
# - url: /.*
#   static_files: webroot/compiled-partials/index.html
#   upload: webroot/compiled-partials/index\.html

# Files to skip when uploading the app to Google App Engine
skip_files:
- ^(.*/)?app\.yaml
- ^(.*/)?app\.yml
- ^(.*/)?index\.yaml
- ^(.*/)?index\.yml
- ^(.*/)?#.*#
- ^(.*/)?.*~
- ^(.*/)?.*\.py[co]
- ^(.*/)?.*/RCS/.*
- ^(.*/)?\..*
# TODO: Once asset compression works, uncomment the lines below to prevent
# uploading development files to App Engine.
# - ^(.*/)?webroot/dev-css
# - ^(.*/)?webroot/dev-js
# - ^(.*/)?webroot/dev-partials
